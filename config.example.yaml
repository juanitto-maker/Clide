# ============================================
# clide Configuration File (Example)
# ============================================
# Copy this file to config.yaml and customize
# Keep config.yaml out of git (already in .gitignore)

# ============================================
# Signal Messenger Configuration
# ============================================
signal:
  # Your Signal phone number (with country code)
  phone_number: "+1234567890"
  
  # Respond in group chats?
  receive_groups: false
  
  # Only respond to messages from admin (you)?
  admin_only: true
  
  # Whitelist of allowed phone numbers (if admin_only is false)
  allowed_numbers:
    - "+1234567890"  # Your number
    # - "+9876543210"  # Add more if needed
  
  # Signal CLI path (auto-detected if not specified)
  # signal_cli_path: "/usr/local/bin/signal-cli"


# ============================================
# AI Brain Configuration (Gemini Flash)
# ============================================
gemini:
  # Get your API key from: https://makersuite.google.com/app/apikey
  # IMPORTANT: Use environment variable in production!
  api_key: "YOUR_GEMINI_API_KEY_HERE"
  
  # Model to use (gemini-2.0-flash-exp is free tier)
  model: "gemini-2.0-flash-exp"
  
  # Temperature (0.0 = deterministic, 1.0 = creative)
  # Lower is better for command generation
  temperature: 0.7
  
  # Max tokens per response
  max_tokens: 2048
  
  # System context/personality
  system_prompt: |
    You are clide, an autonomous terminal operator assistant.
    You help users manage their servers via natural language.
    You are helpful, concise, and security-conscious.
    Always confirm before destructive operations.
    Use emojis sparingly (ðŸ›« for starting, ðŸ›¬ for done).


# ============================================
# Command Executor (Cline CLI)
# ============================================
cline:
  # Enable Cline for autonomous execution
  enabled: true
  
  # Max retries on failure
  max_retries: 3
  
  # Timeout per command (seconds)
  timeout: 300
  
  # Safety level: low, medium, high
  # low: minimal checks
  # medium: balanced (recommended)
  # high: paranoid mode
  safety_level: "medium"
  
  # Cline executable path (auto-detected if not specified)
  # cline_path: "/usr/local/bin/cline"


# ============================================
# Memory & Database
# ============================================
memory:
  # SQLite database location
  database_path: "~/.clide/memory.db"
  
  # Maximum conversation history to keep
  max_history: 1000
  
  # Auto-cleanup old entries?
  auto_cleanup: true
  
  # Cleanup entries older than X days
  cleanup_days: 90
  
  # Encryption passphrase for sensitive data
  # Leave empty to prompt on first run
  encryption_passphrase: ""


# ============================================
# Safety & Security
# ============================================
safety:
  # Enable dry-run mode by default?
  # If true, all commands preview before execution
  dry_run_default: false
  
  # Always confirm destructive operations?
  confirm_destructive: true
  
  # Confirm ALL commands (paranoid mode)?
  confirm_all: false
  
  # Auto-backup before destructive operations?
  auto_backup: true
  
  # Patterns to always block (will never execute)
  blocked_patterns:
    - "rm -rf /"
    - "dd if=/dev/zero"
    - "mkfs"
    - ":(){ :|:& };:"  # Fork bomb
    - "chmod -R 777 /"
  
  # Commands requiring confirmation
  requires_confirmation:
    - "rm"
    - "dd"
    - "mkfs"
    - "fdisk"
    - "userdel"
    - "usermod"
    - "systemctl stop"
    - "systemctl disable"
    - "ufw"
    - "iptables"


# ============================================
# VPS/Server Targets
# ============================================
vps:
  # Define your servers here
  - name: "production"
    host: "prod.example.com"
    user: "clide-bot"
    port: 22
    ssh_key: "~/.ssh/clide_prod"
    description: "Production server"
    
  - name: "staging"
    host: "staging.example.com"
    user: "clide-bot"
    port: 22
    ssh_key: "~/.ssh/clide_staging"
    description: "Staging environment"
    
  # - name: "dev"
  #   host: "dev.example.com"
  #   user: "admin"
  #   port: 2222
  #   ssh_key: "~/.ssh/clide_dev"
  #   description: "Development server"


# ============================================
# Logging
# ============================================
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"
  
  # Log file location
  file: "~/.clide/logs/clide.log"
  
  # Max log file size before rotation
  max_size: "10MB"
  
  # Number of backup log files to keep
  backup_count: 5
  
  # Log format
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  
  # Log to console as well?
  console: true


# ============================================
# Monitoring & Alerts
# ============================================
monitoring:
  # Enable proactive monitoring?
  enabled: true
  
  # Check interval (seconds)
  check_interval: 300  # 5 minutes
  
  # Alert thresholds
  alerts:
    # Disk usage percentage
    disk_usage: 85
    
    # Memory usage percentage
    memory_usage: 90
    
    # CPU usage percentage (sustained)
    cpu_usage: 80
    
    # Failed SSH attempts
    failed_ssh: 5
    
    # SSL certificate expiry (days)
    ssl_expiry: 30
  
  # Notification channels
  notifications:
    # Send to Signal?
    signal: true
    
    # Email notifications?
    email: false
    
    # Email settings (if enabled)
    # email_to: "you@example.com"
    # email_from: "clide@example.com"
    # smtp_host: "smtp.gmail.com"
    # smtp_port: 587


# ============================================
# Workflow Templates
# ============================================
workflows:
  # VPS Hardening
  harden_vps:
    description: "Harden VPS security to Lynis 70+"
    steps:
      - name: "Update system"
        command: "apt update && apt upgrade -y"
      - name: "Configure SSH"
        commands:
          - "sed -i 's/PermitRootLogin yes/PermitRootLogin no/' /etc/ssh/sshd_config"
          - "sed -i 's/#Port 22/Port 2222/' /etc/ssh/sshd_config"
          - "systemctl restart sshd"
      - name: "Setup firewall"
        commands:
          - "ufw default deny incoming"
          - "ufw default allow outgoing"
          - "ufw allow 2222/tcp"
          - "ufw allow 80/tcp"
          - "ufw allow 443/tcp"
          - "ufw --force enable"
      - name: "Install fail2ban"
        command: "apt install -y fail2ban"
      - name: "Configure auto-updates"
        command: "apt install -y unattended-upgrades"
      - name: "Run Lynis audit"
        command: "lynis audit system --quick"
  
  # Database Backup
  backup_database:
    description: "Backup PostgreSQL database to S3"
    steps:
      - name: "Create dump"
        command: "pg_dump -U postgres mydb > /tmp/backup.sql"
      - name: "Compress"
        command: "gzip /tmp/backup.sql"
      - name: "Encrypt"
        command: "gpg --encrypt --recipient you@example.com /tmp/backup.sql.gz"
      - name: "Upload to S3"
        command: "aws s3 cp /tmp/backup.sql.gz.gpg s3://backups/db/"
      - name: "Cleanup"
        command: "rm /tmp/backup.sql.gz.gpg"


# ============================================
# Advanced Settings
# ============================================
advanced:
  # Enable experimental features?
  experimental: false
  
  # Debug mode (very verbose logging)
  debug: false
  
  # Allow self-modification (let clide update itself)
  allow_self_update: false
  
  # Telemetry (anonymous usage statistics)
  # Helps improve clide - no sensitive data collected
  telemetry: false
  
  # Auto-update check
  check_updates: true


# ============================================
# Feature Flags (Future Use)
# ============================================
features:
  # Telegram support (coming in v0.2)
  telegram: false
  
  # Discord support (planned)
  discord: false
  
  # Claude API support (coming in v0.4)
  claude_api: false
  
  # GPT API support (coming in v0.4)
  openai_api: false
  
  # Workflow marketplace (coming in v0.3)
  marketplace: false


# ============================================
# Notes & Reminders
# ============================================
# 
# 1. NEVER commit config.yaml with real credentials
# 2. Use environment variables for sensitive data:
#    api_key: "${GEMINI_API_KEY}"
# 3. Set restrictive permissions: chmod 600 config.yaml
# 4. Backup this file regularly
# 5. Review security settings before production use
#
# For help: https://github.com/yourusername/clide/docs
# ============================================
